# 快速参考 - API Key全局配置

## 🎯 核心变化

### 之前 (v1.0)
```
每个用户 → 单独配置 → localStorage → 只在自己浏览器可用
```

### 现在 (v1.1)
```
管理员 → 配置一次 → sys_config表 → 所有用户都可用
```

## 📋 管理员操作（一次性）

1. 登录后台
2. 管理员控制台 → 系统设置
3. 找到"AI 模型参数 (DeepSeek) - 全局配置"
4. 输入API Key（sk-开头）
5. 点击"保存配置（全局生效）"
6. ✅ 完成！

## 👥 用户体验

- ✅ 无需配置
- ✅ 无需登录
- ✅ 打开即用
- ✅ 所有设备同步

## 🔍 验证方法

### 快速验证
```bash
# 1. 管理员配置API Key
# 2. 打开无痕窗口
# 3. 访问AI聊天
# 4. 应该能直接使用
```

### 跨设备验证
```bash
# 1. 电脑配置API Key
# 2. 手机访问应用
# 3. AI聊天应该能用
```

## 🗄️ 数据存储

### Mock模式（开发）
- 位置：`localStorage`
- Key前缀：`sys_config_`
- 作用域：单个浏览器

### 生产模式（Supabase）
- 位置：`sys_config` 表
- Keys：
  - `llm_api_key`
  - `llm_model`
  - `llm_temperature`
  - `llm_max_tokens`
- 作用域：全局

## 🚀 部署命令

```bash
redeploy.bat
```

## 📱 测试清单

- [ ] 管理员能保存配置
- [ ] 其他浏览器能使用
- [ ] 手机端能使用
- [ ] 清除缓存后仍可用
- [ ] AI状态显示绿色
- [ ] 能收到AI回复

## 🐛 常见问题

### Q: 配置后用户还是不能用？
A: 等待2秒让客户端检测到配置

### Q: Mock模式下不同浏览器不共享？
A: 正常，Mock模式使用localStorage。生产模式会共享。

### Q: 如何确认是全局配置？
A: 清除浏览器所有数据后，AI功能仍然可用

## 📞 技术支持

查看详细文档：
- `API_KEY_GLOBAL_CONFIG.md` - 完整技术说明
- `READY_TO_DEPLOY.md` - 部署指南
- `DEPLOYMENT_CHECKLIST.md` - 检查清单

---

**版本：** v1.1.0  
**更新：** 2025-02-14  
**状态：** ✅ 已实现
